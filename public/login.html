<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8">
  <title>تسجيل الدخول</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>

<body class="bg-slate-900 text-white min-h-screen flex justify-center items-center">
  <div class="bg-slate-800 p-8 rounded-xl w-96">

    <h2 class="text-center text-xl font-bold mb-6">تسجيل الدخول</h2>

    <input id="email" class="w-full p-2 rounded mb-3 bg-slate-700" placeholder="البريد الإلكتروني">
    <input id="password" type="password" class="w-full p-2 rounded mb-3 bg-slate-700" placeholder="كلمة المرور">

    <button onclick="login()" class="w-full bg-indigo-500 py-2 rounded-lg">دخول</button>

    <p id="msg" class="text-center text-red-400 mt-4"></p>

  </div>

  <script>
    async function login(){
      const email = document.getElementById("email").value;
      const password = document.getElementById("password").value;
      const msg = document.getElementById("msg");

      const res = await fetch("/api/login", {
        method:"POST",
        headers:{"Content-Type":"application/json"},
        body:JSON.stringify({email,password})
      });

      const data = await res.json();

      if(!data.success){
        msg.textContent = data.message;
        return;
      }

      localStorage.setItem("user", JSON.stringify(data));

      if(data.role === "admin"){
        window.location.href = "admin.html";
      } else {
        window.location.href = "index.html";
      }
    }
  </script>
</body>
</html>